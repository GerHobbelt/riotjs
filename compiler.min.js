(function(e){var r=("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,"+"defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,"+"indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,"+"pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,"+"typemustmatch,visible").split(",");var t="area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(",");var n=["style","src","d"];var i={jade:O};var c={coffeescript:x,none:S,cs:x,es6:k,typescript:q,livescript:E,ls:E};var o={none:T,stylus:$,sass:C,less:j};var s=/^<([\w\-]+)>(.*)<\/\1>/gim,a=/=({[^}]+})([\s\/\>])/g,u=/([\w\-]+)=(["'])([^\2]+?)\2/g,f=/{\s*([^}]+)\s*}/g,l=/^<([\w\-]+)>([^\x00]*[\w\/}"']>$)?([^\x00]*?)^<\/\1>/gim,p=/<script(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/script>/gm,d=/<style(?:\s+type=['"]?([^>'"]+)['"]?)?(\s+scoped)?>([^\x00]*?)<\/style>/gm,m=/(^|\}|\{)\s*([^\{\}]+)\s*(?=\{)/g,g=/\/\*[^\x00]*?\*\//gm,v=/<!--.*?-->/g,y=/<([\w\-]+)([^>]*)\/\s*>/g,b=/^\s*\/\/.*$/gm,h=/\/\*[^\x00]*?\*\//gm;function w(e,i,c){var o=riot.util.brackets;e=e.replace(o(a),'="$1"$2');e=i.whitespace?e.replace(/\n/g,"\\n"):e.replace(/\s+/g," ");e=e.trim().replace(v,"");e=e.replace(u,function(e,t,i,c){if(c.indexOf(o(0))>=0){t=t.toLowerCase();if(n.indexOf(t)>=0)t="riot-"+t;else if(r.indexOf(t)>=0)t="__"+t}return t+'="'+c+'"'});if(i.expr){e=e.replace(o(f),function(e,r){var t=A(r,i,c).trim().replace(/\r?\n|\r/g,"").trim();if(t.slice(-1)==";")t=t.slice(0,-1);return o(0)+t+o(1)})}e=e.replace(y,function(e,r,n){var i="<"+r+(n?" "+n.trim():"")+">";if(t.indexOf(r.toLowerCase())==-1)i+="</"+r+">";return i});e=e.replace(/'/g,"\\'");e=e.replace(o(/\\{|\\}/g),"\\$&");if(i.compact)e=e.replace(/> </g,"><");return e}function x(e){if(typeof exports==="undefined"){return CoffeeScript.compile(e,{bare:true})}return require("coffee-script").compile(e,{bare:true})}function k(e){if(typeof exports==="undefined"){return babel.transform(e,{blacklist:["useStrict"]}).code}return require("babel").transform(e,{blacklist:["useStrict"]}).code}function q(e){return require("typescript-simple")(e)}function E(e){return require("LiveScript").compile(e,{bare:true,header:false})}function S(e){return e}function O(e){return require("jade").render(e,{pretty:true})}function L(e){e=e.replace(b,"").replace(h,"");var r=e.split("\n"),t="";r.forEach(function(e,n){var i=e.trim();if(i[0]!="}"&&i.indexOf("(")>0&&i.indexOf("function")==-1){var c=/[{}]/.exec(i.slice(-1)),o=c&&/(\s+)([\w]+)\s*\(([\w,\s]*)\)\s*\{/.exec(e);if(o&&!/^(if|while|switch|for)$/.test(o[2])){r[n]=o[1]+"this."+o[2]+" = function("+o[3]+") {";if(c[0]=="}"){r[n]+=" "+i.slice(o[0].length-1,-1)+"}.bind(this)"}else{t=o[1]}}}if(e.slice(0,t.length+1)==t+"}"){r[n]=t+"}.bind(this);";t=""}});return r.join("\n")}function T(e){return e}function $(e){return require("stylus").render(e)}function j(e){require("less").render(e,function(r,t){if(r)throw new Error("Error processing LESS: "+r.line+":"+r.index+' "'+r.message+'"');e=t.css});return e}function C(e){return require("node-sass").renderSync({data:e}).css}function R(e,r){return r.replace(g,"").replace(m,function(r,t,n){return t+" "+n.split(/\s*,\s*/g).map(function(r){return r[0]=="@"?r:e+" "+r.replace(/:scope\s*/,"")}).join(",")}).trim()}function A(e,r,t){var n=r.parser||(t?c[t]:L);if(!n)throw new Error('Parser not found "'+t+'"');return n(e,r)}function H(e,r){var t=i[e];if(!t)throw new Error('Template parser not found "'+e+'"');return t(r)}function M(e,r,t,n,i){var c=o[n]||T;e=c(e);if(i)e=R(t,e);return e.replace(/\s+/g," ").replace(/\\/g,"\\\\").replace(/'/g,"\\'").trim()}function _(e,r,t,n){return"riot.tag('"+e+"', '"+r+"'"+(t?", '"+t+"'":"")+", function(opts) {"+n+"\n});"}function z(e,r){r=r||{};if(r.brackets)riot.settings.brackets=r.brackets;if(r.template)e=H(r.template,e);e=e.replace(s,function(e,t,n){return _(t,w(n,r),"","")});return e.replace(l,function(e,t,n,i){n=n||"";var c=r.type;if(!i.trim()){n=n.replace(p,function(e,r,t){if(r)c=r.replace("text/","");i=t;return""})}var o=r.styletype,s="",a=false;n=n.replace(d,function(e,r,t,n){a=!!t;if(r)o=r.replace("text/","");s=n;return""});return _(t,w(n,r,c),M(s,r,t,o,a),A(i,r,c))})}if(!e){this.riot=require(process.env.RIOT||"../riot");return module.exports={compile:z,html:w,style:M,js:A}}var G=e.document,I,P;function X(e,r){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4&&t.status==200)r(t.responseText)};t.open("GET",e,true);t.send("")}function B(e){var r=/[ \t]+/.exec(e);if(r)e=e.replace(new RegExp("^"+r[0],"gm"),"");return e}function D(e){var r=G.createElement("script"),t=G.documentElement;r.text=z(e);t.appendChild(r);t.removeChild(r)}function F(e){var r=G.querySelectorAll('script[type="riot/tag"]'),t=r.length;[].map.call(r,function(r){var n=r.getAttribute("src");function i(r){D(r);t--;if(!t){I.trigger("ready");P=true;e&&e()}}return n?X(n,i):i(B(r.innerHTML))})}riot.compile=function(e,r){if(typeof e=="string"){if(e.trim()[0]=="<"){var t=B(z(e));if(!r)D(t);return t}else{return X(e,function(e){var t=B(z(e));D(t);r&&r(t,e)})}}if(typeof e!="function")e=undefined;if(P)return e&&e();if(I){e&&I.on("ready",e)}else{I=riot.observable();F(e)}};var J=riot.mount;riot.mount=function(e,r,t){var n;riot.compile(function(){n=J(e,r,t)});return n};riot.mountTo=riot.mount})(typeof window!="undefined"?window:undefined);